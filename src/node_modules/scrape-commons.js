// all scraping stuff
const logger = require('logger.js')("Scraping module");
const rp = require('request-promise');
const cheerio = require('cheerio');
const dt = require('data-tables');

async function getPage(url, qs = {}) {
  const options = {
    method: 'GET',
    uri:    url,
    qs: qs,
    resolveWithFullResponse: true,
    transform: (body) => {
      return cheerio.load(body);
    },
  };

  return rp(options)
    .then($ => {
      
      return $;
    })
    .catch(err => {
      logger.error(`An error has occurred on request. ${err}`);
    });
}

exports.getPage = getPage;
